<Paper key={f.id} variant="outlined" sx={{ mb: 2, borderRadius: 2 }}>
  {/* Function tile: compact Name | Language on one row */}
  <Box
    onClick={() => toggleFunc(f.id)}
    sx={{
      cursor: 'pointer',
      py: 0.75,
      px: 1.25,
      '&:hover': { bgcolor: 'action.hover' },
      borderBottom: '1px solid',
      borderColor: 'divider',
    }}
  >
    {/* two columns: name (with badge) | language */}
    <Box
      sx={{
        display: 'grid',
        alignItems: 'center',
        columnGap: 2,
        gridTemplateColumns: { xs: '1fr', sm: 'minmax(240px, 33%) 1fr' },
      }}
    >
      <Stack direction="row" spacing={1.25} alignItems="center" sx={{ minWidth: 0 }}>
        <FunctionBadge functionName={f.name} />
        <Typography variant="subtitle1" fontWeight={800} noWrap>
          {f.name}
        </Typography>
      </Stack>

      {!compactMode && (
        <Typography
          variant="body2"
          color="text.secondary"
          sx={{ whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}
          title={f.desc}
        >
          {f.desc}
        </Typography>
      )}
    </Box>
  </Box>

  <Collapse in={open} unmountOnExit>
    <Divider sx={{ mb: 1 }} />
    {!compactMode && (
      <Box sx={{ px: 1.25 }}>
        <BlackHeader left="Category Name" right="Category Language" />
      </Box>
    )}
    <Box sx={{ p: 1.25, pt: 0.5 }}>
      {f.cats.map((cat) => (
        <CategoryRow key={cat.id} fId={f.id} cat={cat} />
      ))}
    </Box>
  </Collapse>
</Paper>
