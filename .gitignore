// DEV-ONLY impersonation header injector
if (import.meta.env.MODE === "development" || process.env.NODE_ENV === "development") {
  // Lazy import to avoid bundling dev helpers into prod chunks
  import("../dev/impersonation").then(({ getImpersonation }) => {
    api.interceptors.request.use((req) => {
      const u = getImpersonation();
      if (u) {
        // Header names must match your SsoIdentityOptions.Header* keys
        req.headers["pzid"] = u.pzid;
        req.headers["eid"] = u.eid;
        req.headers["firstName"] = u.firstName || "";
        req.headers["lastName"]  = u.lastName  || "";
        req.headers["email"]     = u.email     || "";
      }
      return req;
    });
  });
}
