import React from 'react';
import { Paper, Stack, Box } from '@mui/material';
import TextField from '../../core/TextField';
import Button from '../../core/Button';

export default function FilterBar({
  filtersLeft = null,         // a node: we'll pass a grid of selects from the page
  searchValue,
  onSearchChange,
  onExport,
  exportLabel = 'Export',
}) {
  return (
    <Paper sx={{ p: { xs: 1.25, md: 2 } }}>
      <Stack
        direction={{ xs: 'column', lg: 'row' }}
        spacing={2}
        alignItems={{ lg: 'center' }}
        justifyContent="space-between"
        sx={{ rowGap: 1 }}
      >
        {/* Filters area auto-wraps nicely from tablets to wide monitors */}
        <Box sx={{ flex: 1, minWidth: 0 }}>
          {filtersLeft}
        </Box>

        {/* Search + Export always visible, never clipped */}
        <Stack
          direction="row"
          spacing={1}
          alignItems="center"
          sx={{
            width: { xs: '100%', lg: 'auto' },
            minWidth: { lg: 320 },
            flexShrink: 0,
          }}
        >
          <TextField
            label="Search"
            search
            value={searchValue}
            onChange={onSearchChange}
            fullWidth
          />
          <Button onClick={onExport}>{exportLabel}</Button>
        </Stack>
      </Stack>
    </Paper>
  );
}
