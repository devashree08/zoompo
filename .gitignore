import * as React from 'react';
import { Box, Tooltip, IconButton, Stack, ListItemButton, ListItemIcon, ListItemText } from '@mui/material';
import { NavLink } from 'react-router-dom';
import { useLayoutUI } from '../LayoutUIContext';

export default function Sidenav({ items = [] }) {
  const { railExpanded } = useLayoutUI();

  return (
    <Box sx={{ height: '100%', display: 'flex', alignItems: 'flex-start', justifyContent: 'center', pt: 1 }}>
      {railExpanded ? (
        // Expanded = icon + label (bold, easy to scan)
        <Box sx={{ width: '100%' }}>
          <Stack spacing={0.5} sx={{ px: 1, pt: 0.5 }}>
            {items.map((it) => (
              <ListItemButton
                key={it.to}
                component={NavLink}
                to={it.to}
                sx={{
                  borderRadius: 1.5,
                  '&.active': { bgcolor: 'action.selected' },
                }}
              >
                <ListItemIcon>{it.icon}</ListItemIcon>
                <ListItemText
                  primary={it.label}
                  primaryTypographyProps={{ fontWeight: 700 }}
                />
              </ListItemButton>
            ))}
          </Stack>
        </Box>
      ) : (
        // Collapsed = icon-only pills with tooltips
        <Stack spacing={1}>
          {items.map((it) => (
            <Tooltip key={it.to} title={it.label} placement="left">
              <IconButton
                component={NavLink}
                to={it.to}
                size="large"
                sx={{
                  borderRadius: 2,
                  color: 'text.secondary',
                  '&.active': { bgcolor: 'action.selected', color: 'text.primary' },
                }}
              >
                {it.icon}
              </IconButton>
            </Tooltip>
          ))}
        </Stack>
      )}
    </Box>
  );
}
