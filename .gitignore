import * as React from 'react';

const Ctx = React.createContext(null);

export function LayoutUIProvider({ children }) {
  const [railExpanded, setRailExpanded] = React.useState(false);
  const [drawerOpen, setDrawerOpen]   = React.useState(false);

  const value = React.useMemo(() => ({
    railExpanded,
    drawerOpen,
    toggleRail: () => setRailExpanded(v => !v),
    openDrawer:  () => setDrawerOpen(true),
    closeDrawer: () => setDrawerOpen(false),
    toggleDrawer: () => setDrawerOpen(v => !v),
  }), [railExpanded, drawerOpen]);

  return <Ctx.Provider value={value}>{children}</Ctx.Provider>;
}

export function useLayoutUI() {
  const v = React.useContext(Ctx);
  if (!v) throw new Error('useLayoutUI must be used inside LayoutUIProvider');
  return v;
}
