import * as React from 'react';

const LayoutUIContext = React.createContext(null);

export const NAVBAR_HEIGHT = 64;
export const RAIL_WIDTH_COLLAPSED = 64;
export const RAIL_WIDTH_EXPANDED  = 220;

export function LayoutUIProvider({ children }) {
  const [railExpanded, setRailExpanded] = React.useState(false);
  const [drawerOpen, setDrawerOpen] = React.useState(false);

  const toggleRail   = () => setRailExpanded(v => !v);
  const toggleDrawer = () => setDrawerOpen(v => !v);
  const closeDrawer  = () => setDrawerOpen(false);

  const value = React.useMemo(() => ({
    railExpanded,
    drawerOpen,
    toggleRail,
    toggleDrawer,
    closeDrawer
  }), [railExpanded, drawerOpen]);

  return (
    <LayoutUIContext.Provider value={value}>
      {children}
    </LayoutUIContext.Provider>
  );
}

export function useLayoutUI() {
  const ctx = React.useContext(LayoutUIContext);
  if (!ctx) throw new Error('useLayoutUI must be used within LayoutUIProvider');
  return ctx;
}
