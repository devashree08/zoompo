import * as React from 'react';
import { Tabs, Tab, Box, Chip } from '@mui/material';

export default function OrgTabs({ orgs = [], activeOrgID, onChange, editableOrgID }) {
  const idx = Math.max(0, orgs.findIndex(o => o.orgID === activeOrgID));
  const handle = (_, i) => onChange?.(orgs[i]?.orgID);

  return (
    <Box sx={{ mb: 1 }}>
      <Tabs value={idx} onChange={handle} variant="scrollable" scrollButtons="auto">
        {orgs.map((o) => (
          <Tab
            key={o.orgID}
            label={
              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
                <span>{o.orgName}</span>
                {o.orgID === editableOrgID ? <Chip size="small" label="editing" color="primary" /> : <Chip size="small" label="view" variant="outlined" />}
              </Box>
            }
            sx={{ textTransform: 'none' }}
          />
        ))}
      </Tabs>
    </Box>
  );
}
